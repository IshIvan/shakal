## Шакал
### Что такое?
Это набор node.js скриптов, запакованных в докер образ и используемых для сжатия в gzip и brotli.

### Как использовать?
```bash
npx shakal-cli ./dist
# или
npx shakal-cli '["dist/static", "dist/chunks"]' # json массив дирректорий
```

#### Вариант c docker
```
docker run \
    -v $(pwd)/dist:/scripts/dist \
    --env 'dirs=["dist/", "prod/"]' \
    -i mngame/shakal
```
* `-v $(pwd)/dist:/scripts/dist` – указание докеру взять директорию с локального окружения `dist` и считать ее директорией `/scripts/dist` в окружении докер контейнера
* `--env 'dirs=["dist/", "prod/"]'` – указание переменной окружения `dirs`, которая должна быть в формате JSON и описывать массив строк. Каждая строка – это название локальной директории, которая была указана шагом выше. **Строка должна заканчиваться слешом.**
* `-i mngame/shakal` – указанием образа, если вы собрали локально, то строчка будет отличаться

### Разработка
* `base-compressor.js` – скрипт, который реализует базовую логику по сжатию.

    Аргументы на вход:
    * функция сжатия – любая js-функция. На данный момент поддерживается brotli и gzip;
    * параметры сжатия – объект с параметрами, необходимыми для переданной функции;
    * расширение – расширение артефактов сжатия. Необходимо указывать, начиная с символа точки.
* `gzip.js` – скрипт, который производит сжатие в gzip с 9 уровнем;
* `brotli.js` – скрипт, который производит сжатие в brotli с 11 уровнем.
* `index.js` – принимает как аргумент список дирректорий и запускает оба типа сжатия.
* `bin/shakal` – обертка для консольной утилиты.

```bash 
npm start -- test
npm start -- '["test/1", "test/2"]'
```
